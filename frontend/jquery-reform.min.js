/*! reform 2.3.0 https://github.com/Se7enSky/reform */
(function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=function(a){"use strict";var c;return c=function(){function c(b,c){var d=this;this.el=b,this.$el=a(this.el),this.options=a.extend({},this.defaults,c),this.submitting=!1,this.$el.on({"reform.validationError":function(a,b){return d.showErrors(b)},"reform.success":function(){return d.options.successFormClass&&d.$el.addClass(d.options.successFormClass),d.options.successMessageClass?d.findSuccessMessages().addClass(d.options.successMessageClass):void 0}}),this.options.ajax&&this.initAjaxForm()}return c.prototype.defaults={actionPrefix:!1,ajax:!0,invalidInputClass:"invalid-field",invalidInputParentClass:"invalid-field-parent",activeErrorClass:"active-error",activeErrorParentClass:"active-error-parent",submittingFormClass:"submitting",invalidFormClass:"submitted-invalid",successFormClass:"submitted-success",successMessageClass:"active-success-message",errorResponseCodes:["ValidationError","validation_error","validationError","invalid","validation"]},c.prototype.startedSubmitting=function(){return this.options.submittingClass&&this.$el.addClass(this.options.submittingClass),this.submitting=!0,this.$el.trigger("reform.submitting")},c.prototype.stoppedSubmitting=function(){return this.submitting=!1,this.options.submittingClass?this.$el.removeClass(this.options.submittingClass):void 0},c.prototype.findSuccessMessages=function(){var b,c;return c=a([]),b=this.el,a("[data-success-message-for]").each(function(){var d,e;return e=a(this).data().successMessageFor,d=a(e).get(0),b===d?c=c.add(a(this)):void 0}),console.log(c),c},c.prototype.beforeSubmit=function(a){return this.submitting?!1:(this.clearErrors(),this.$el.trigger("reform.beforeSubmit",{formData:a}),this.startedSubmitting(),!0)},c.prototype.clearErrors=function(){return this.options.successFormClass&&this.$el.removeClass(this.options.successFormClass),this.options.invalidFormClass&&this.$el.removeClass(this.options.invalidFormClass),this.options.activeErrorClass&&this.$el.find("[data-error-for]").removeClass(this.options.activeErrorClass),this.options.activeErrorParentClass&&this.$el.find("[data-error-for]").parent().removeClass(this.options.activeErrorParentClass),this.options.invalidInputParentClass&&this.$el.find("input."+this.options.invalidInputClass).parent().removeClass(this.options.invalidInputParentClass),this.$el.find("input."+this.options.invalidInputClass).removeClass(this.options.invalidInputClass)},c.prototype.showErrors=function(a){var b,c,d,e,f,g,h;this.options.invalidFormClass&&this.$el.addClass(this.options.invalidFormClass),this.options.activeErrorClass&&this.$el.find("[data-error-for='*']").addClass(this.options.activeErrorClass),this.options.activeErrorParentClass&&this.$el.find("[data-error-for='*']").parent().addClass(this.options.activeErrorParentClass),h=[];for(d in a)c=a[d],this.options.activeErrorClass&&this.$el.find("[data-error-for='"+d+"']").addClass(this.options.activeErrorClass),this.options.activeErrorParentClass&&this.$el.find("[data-error-for='"+d+"']").parent().addClass(this.options.activeErrorParentClass),e=d.replace(/\.([^\.]+)/g,"[$1]"),console.log(e),b=this.$el.find("[name='"+e+"']"),b.addClass(this.options.invalidInputClass),this.options.invalidInputParentClass&&b.parent().addClass(this.options.invalidInputParentClass),h.push(function(){var a;a=[];for(g in c)f=c[g],this.options.activeErrorClass&&(this.$el.find("[data-error-for='"+d+" "+g+"']").addClass(this.options.activeErrorClass),this.$el.find("[data-error-for='* "+g+"']").addClass(this.options.activeErrorClass)),this.options.activeErrorParentClass?(this.$el.find("[data-error-for='"+d+" "+g+"']").parent().addClass(this.options.activeErrorParentClass),a.push(this.$el.find("[data-error-for='* "+g+"']").parent().addClass(this.options.activeErrorParentClass))):a.push(void 0);return a}.call(this));return h},c.prototype.handleResponse=function(a,c){var d,e;return this.stoppedSubmitting(),this.$el.trigger("reform.response",{err:a,res:c}),d=null!=c?c.code:void 0,(b.call(this.options.errorResponseCodes,d)>=0||(null!=c?c.errors:void 0))&&(a=c,c=null),a?(e=null!=a?a.code:void 0,b.call(this.options.errorResponseCodes,e)>=0?this.$el.trigger("reform.validationError",a.errors||[]):this.$el.trigger("reform.unknownError",a)):this.$el.trigger("reform.success",c)},c.prototype.initAjaxForm=function(){var a=this;return this.$el.ajaxForm({url:this.options.actionPrefix?""+this.options.actionPrefix+this.$el.attr("action"):this.$el.attr("action"),beforeSubmit:function(b){return a.beforeSubmit(b)},success:function(b){return a.handleResponse(null,b)},error:function(b){var c,d,e;try{return c=b.getResponseHeader("Content-Type"),e=function(){switch(c){case"application/json":return JSON.parse(b.responseText);default:throw new Error("Unsupported response data format")}}(),a.handleResponse(e)}catch(f){return d=f,a.$el.trigger("reform.unknownError",d)}}})},c.prototype.method=function(){return alert("I am a method")},c}(),a.fn.reform=function(b){return this.each(function(){var d,e;return d=a(this),e=d.data("reform"),e||d.data("reform",e=new c(this,b)),"string"==typeof b?e[b].call(d):void 0})}},"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}).call(this);